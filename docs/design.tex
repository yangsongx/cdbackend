\documentclass{beamer}
\usetheme{Madrid}
%\usetheme{Hannover}
\usepackage{fontspec,xunicode,xltxtra,xecolor,listings,color}
\usepackage{bchart}
\usepackage{tikz}
\usetikzlibrary{arrows,shapes,trees,calc,automata,positioning}
\tikzset{
  mybox/.style={
    rectangle,
    rounded corners,
    draw=black
  },
}

\setmainfont{WenQuanYi Micro Hei}
\setsansfont{WenQuanYi Micro Hei}
\setmonofont{WenQuanYi Micro Hei}
\XeTeXlinebreaklocale "zh"
\XeTeXlinebreakskip=0pt plus 1pt minus 0.1pt

\begin{document}

\defverbatim[colored]\apicode{%
  \begin{lstlisting}[basicstyle=\tiny,language=java,frame=lines,showspaces=false,emphstyle=\color{blue}]
import com.caredear.common.util.CdRecycleUsrData;

int CdRecycleUsrData.saveDeletedContactData(String deleted_contact);
int CdRecycleUsrData.restoreDeletedContactData(Context context);
\end{lstlisting}
}

\title{亲连服务器开发设计文档}
\institute{CearDear Service Team}
\frame{\titlepage}

\begin{frame}
\frametitle{Outline}
\tableofcontents
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{新用户注册设计}

%  ######################
\begin{frame}
\frametitle{申请Token}


\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{网盘设计}

%  ######################
\begin{frame}[fragile]
\frametitle{上传文件}

Hello:

\begin{tikzpicture}
\node [mybox] (ID1) {\begin{lstlisting}
int i;
                     \end{lstlisting}};
\end{tikzpicture}
\end{frame}


%  ######################
\begin{frame}
\frametitle{下载文件}

\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Debug and Tips}

%  ######################
\begin{frame}
\frametitle{调试}
  \framesubtitle{运行情况}
\begin{tikzpicture}
\node [mybox] (ID21k) {21k-code};
\node [mybox, right of = ID21k, xshift=1.5cm] (IDksadmin) {ksadmin};
\node [mybox, right of = IDksadmin, xshift=1.5cm] (IDksapp1) {ksapp1};
\node [mybox, right of = IDksadmin, xshift=1.5cm, yshift=-1.5cm] (IDksapp3) {ksapp3};
\end{tikzpicture}

\end{frame}

%  ######################
\begin{frame}
\frametitle{调试}
  \framesubtitle{运算Token}
  use openssl command and base64 command

\end{frame}


\end{document}
